@using Core
@page "/search"
@inject ISearchLogic SearchLogic

<h3>Search</h3>
<InputText @bind-Value="searchQuery" placeholder="Enter search query" />
<button @onclick="PerformSearch">Search</button>

@if (searchResult != null)
{
    <div>
        <h4>Results:</h4>
        @if (searchResult.Result?.DocumentHits != null)
        {
            @foreach (var result in searchResult.Result.DocumentHits)
            {
                <p>@result.Document?.Title - @result.Document?.Snippet</p>
            }
        }
        <h4>Snippets:</h4>
        @if (searchResult.Snippets != null)
        {
            @foreach (var snippet in searchResult.Snippets)
            {
                <p>@snippet</p>
            }
        }
    </div>
}

@code {
    private string searchQuery;
    private SearchResultWithSnippet searchResult;

    private async Task PerformSearch()
    {
        searchResult = await SearchLogic.SearchAsync(searchQuery.Split(' '), 10);
    }
}

